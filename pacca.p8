pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
--pacca
--m.ivkovic (whippet)


function _init()
	_ugm=update_start
	_dgm=draw_start
	_t=0
end

function _update()
	_ugm()
	_t+=1
end

function _draw()
	cls()
	_dgm()
end
-->8
--start

function update_start()
	if btnp(❎) then
		_ugm=update_play
		_dgm=draw_play
	end
end

function draw_start()
	print("press ❎ to start",30,45,7)
end
-->8
--play

function update_play()
	if btnp(⬅️) then
		p.dir=4
		p.mx-=1
		p.my=0
	elseif btnp(➡️) then
		p.dir=2
		p.mx+=1
		p.my=0
	elseif btnp(⬆️) then
		p.dir=1
		p.my-=1
		p.mx=0
	elseif btnp(⬇️) then
		p.dir=3
		p.my+=1
		p.mx=0
	end
	
	if check_tile() then
		--move player to next tile
		p.x+=p.mx
		p.y+=p.my
	else
		dir=0
	end
end

function draw_play()
	map()
	spr(1,p.x*8,p.y*8)
end
-->8
--gameover
-->8
--game elements

--player
p={}
p.x=0
p.y=0
p.mx=0 --next move
p.my=0 --next move
p.dir=0
p.lives=3
--p.spr=anim()


--tilecheck
function check_tile()
	--take player current tile
	--take player dir
	--check next tile
	--if okay move to it
	--else stop
	return true
end
__gfx__
0000000000aaaaa000aaaa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000aaaaa000aaaaaa000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700aaaaa000aaaaaaaa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000aaaa0000aaaaaa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000aaaa0000aaaa000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700aaaaa000aaaaaaaa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000aaaaa000aaaaaa000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000aaaaa000aaaa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000770000007700000000000000000000000000000077000000770000000000000077000000770000007700000000000000000000000000000000000
00000000000770000007700000000000000000000000000000077000000770000000000000077000000770000007700000000000000000000000000000000000
00000000000770000007700000000000000000000000000000077000000770000000000000077000000770000007700000000000000000000000000000000000
77777777000770000007777700077777000000007777700077777000777777777777777700077777777770007777777700000000000000000000000000000000
77777777000770000007777700077777000000007777700077777000777777777777777700077777777770007777777700000000000000000000000000000000
00000000000770000000000000077000000000000007700000000000000000000007700000077000000770000007700000000000000000000000000000000000
00000000000770000000000000077000000000000007700000000000000000000007700000077000000770000007700000000000000000000000000000000000
00000000000770000000000000077000000000000007700000000000000000000007700000077000000770000007700000000000000000000000000000000000
__map__
3330303030303030303030303038383030303030383830383830303030303500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3100000000000000000000000032360000000000313100313100000000003100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3100333030350033303030350000000033303500323600313100333035003100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3100310000310031000000310033350031003100000000313100310031003100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3100323030360032303030360031310032303600333500323600323036003100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3100000000000000000000000031310000000000313100000000000000003100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3100333500333035003335000031323030303030363230350033303030303a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3100313100310031003131000032303030303030353330360032303030303a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3100313100310031003131000000000000000000313100000000000000003100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3100313100310031003131000033303030303030363230350033303030303a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3100323600323036003236000031333030303030353330360032303030303a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3100000000000000000000000031310000000000323600000000000000003100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3100333030350033303030350031310033303500000000333500333035003100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3100310000310031000000310032360031003100333500313100310031003100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3100323030360032303030360000000032303600313100313100323036003100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3100000000000000000000000033350000000000313100313100000000003100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3230303030303030303030303037373030303030373730373730303030303600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
