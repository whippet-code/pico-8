pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
--invader like
--m.ivkovic (whippet)

function _init()
	_ugm=update_start
	_dgm=draw_start
	
	aliens={}
	make_alien(5)
	
	make_player()
	bullets={}
	
	track=0
	dir=1
end

function _update()
	_ugm()
	if track<60 then
		track+=1
	else
		track=0
	end
end

function _draw()
	cls()
	_dgm()
end
-->8
--update

function update_start()
	_ugm=_init
	if btnp(‚ùé) then 
		_ugm=update_game
		_dgm=draw_game
	end
end

function update_game()
	for i=1,#aliens do
		local a=aliens[i]
		update_alien(a)
	end
	update_player()
	update_bullets()
end

function update_gameover()

end
-->8
--draw

function draw_start()
	print("üê± invader like ‚òÖ",30,40,4)
	print("press ‚ùé to play",33,60,6)
end

function draw_game()
	for i=1, #aliens do
		local a=aliens[i]
		draw_alien(a)
	end
	
	draw_player()
	draw_bullets()
end

function draw_gameover()

end
-->8
--aliens

function make_alien(n)
	for i=1, n do
		local a={}
		a.x=(i*10)
		a.y=4
		a.sprite=32
		
		add(aliens,a)
	end
end

function draw_alien(a)
	spr(a.sprite,a.x,a.y)
end

function update_alien(a)
	if track<60 then
		a.x+=1*dir
	else
		a.y+=4
		dir*=-1
		sfx(0)
	end
end
-->8
--player

function make_player()
	p={}
	p.x=60
	p.y=120
	p.sprite=16
end

function update_player()
	if btn(‚¨ÖÔ∏è) then
		p.x-=2
	end
	if btn(‚û°Ô∏è) then
		p.x+=2
	end
	if btnp(‚ùé) then
		if #bullets<5 then
			shoot()
			sfx(1)
		end
	end
end

function draw_player()
	spr(p.sprite,p.x,p.y)
end
-->8
--bullets

function make_bullet()
	local b={}
	b.x=p.x+3
	b.y=p.y
	
	add(bullets,b)
end

function shoot()
	make_bullet()
end

function update_bullets()
	for i=#bullets,1,-1 do
		local b=bullets[i]
		--check collision
		--update position
		if b.y>0 then
			b.y-=4
		else
			del(bullets,b)
		end
	end
end

function draw_bullets()
	for i=1,#bullets do
		local b=bullets[i]
		circfill(b.x,b.y,1)
	end
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00066000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00066000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
006cc600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007cc700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
077cc770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
67566576000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66555566000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
605aa506000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000bb00000bbbb000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00bbbb000b0000b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0b0000b0b000000b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
b030030bb030030b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
b000000b0bbbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0bbbbbb000bbbb000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00bbbb0000b00b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbb00bbb0bb00bb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
9203000002112051221f13304122001120010300103001030010300103001030010300103001030010300103001030010300103001030010300103001033f1030010300103001030010300103001030010300103
a703000007551075513b5513255123551005010050100501005010050100501005010050100501005010050100501005010050100501005010050100501005010050100501005010050100501005010050100501
